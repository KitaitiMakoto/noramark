<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
<title>NoraMark Manual</title>
<link rel="stylesheet" type="text/css" href="nora-simple.css" />
<link rel="stylesheet" type="text/css" href="nora-simple-ja.css" />
</head>
<body>
<section><h1 id='heading_index_1'>NoraMark Manual</h1>
<div class='pgroup'><p><strong>(作成中・記述は未完成です。)</strong></p>
</div>
<div class='pgroup'><p>NoraMarkは、EPUBで利用するXHTMLを生成するためのマークアップとしてデザインされました。次のような特徴があります。</p>
</div>
<ul><li>プレーンテキストの原稿を邪魔しない最小限の記述</li>
<li>しかしマークアップ部分は、通常のテキストと「違って」見える。</li>
<li>ブロック・ライン・インラインごとの基本記法を原則として固定。憶える記法は少なくてすむはず。</li>
<li>生のHTML記法なしで、多くのタグを記述できる</li>
<li>マークアップに独自コマンドの追加ができる</li>
<li>文書構造に対する処理を追加できる</li>
<li>パース結果をXMLとして取得できる</li>
</ul>
<section><h2 id='heading_index_2'>必要なもの</h2>
<ul><li>ruby 2.0以上</li>
</ul>
</section>
<section><h2 id='heading_index_3'>インストール方法</h2>
<div class='pgroup'><p>Gemfileに次のように書きます</p>
</div>
<pre><code>gem 'nora_mark' </code></pre>
<div class='pgroup'><p>そして、</p>
</div>
<pre><code>$ bundle</code></pre>
<div class='pgroup'><p>または</p>
</div>
<pre><code>gem install nora_mark</code></pre>
</section>
<section><h2 id='heading_index_4'>使い方</h2>
<section><h3 id='heading_index_5'>コマンドラインから</h3>
<pre><code>$ nora2html &lt; source.nora &gt; output.xhtml</code></pre>
<div class='pgroup'><p>入力はutf-8のみ受け付けます。日本語のテキストであれば、kconvオプションでうまくうごくかもしれません。</p>
</div>
<pre><code>$ nora2html --kconv &lt; source.nora &gt; output.xhtml</code></pre>
<div class='pgroup'><p><span class='strong'>nora2htmlは、newpageコマンドを&lt;hr /&gt;タグに置き換え、すべてのページをひとつのxhtmlとして出力します</span></p>
</div>
</section>
<section><h3 id='heading_index_6'>コードから</h3>
<pre class='code-ruby' data-code-language='ruby'><code>require 'nora_mark'
document = NoraMark::Document.parse(string_or_io, lang: 'ja')
document.html.write_as_files</code></pre>
</section>
</section>
<section><h2 id='heading_index_7'>マークアップ</h2>
<section><h3 id='heading_index_8'>通常のテキスト</h3>
<div class='pgroup'><p>単なるテキストもHTMLに変換されます。</p>
</div>
<div class='pgroup'><p>改行ごとに&lt;p&gt;要素がつくられます。空行で区切られると、&lt;div class='pgroup'&gt;がつくられます。</p>
<p>言語が日本語(ja)以外の場合は、次のようになります。</p>
</div>
</section>
<section><h3 id='heading_index_9'>明示的なブロック</h3>
<div class='pgroup'><p>NoraMarkでは、&lt;コマンド&gt; { ではじまり、} のみの行で終わる範囲を明示的なブロックとみなします。</p>
</div>
<div class='pgroup'><p>定義済みの明示的ブロックのコマンドは、次のものがあります。</p>
</div>
<dl><dt>d</dt>
<dd>divを生成します</dd>
<dt>sec, section</dt>
<dd>sectionを生成します</dd>
<dt>art, article</dt>
<dd>articleを生成します</dd>
</dl>
<div class='pgroup'><p>このほかに、後述のpreformatブロックがあります。</p>
</div>
<div class='pgroup'><p>未定義のコマンドの場合は、対応する名前のタグを生成します。</p>
</div>
</section>
<section><h3 id='heading_index_10'>インラインコマンド</h3>
<div class='pgroup'><p>インラインコマンドは、次の形式をしています。</p>
</div>
<pre>[&lt;コマンド&gt;{内容}]</pre>
<div class='pgroup'><p>定義済みのインラインコマンドには、次のものがあります。</p>
</div>
<dl><dt>l</dt>
<dd><div class='pgroup'><p>リンクを定義する。</p>
</div>
<pre>[l(http://github.com/skoji/noramark){NoraMarkのレポジトリ}]</pre>
</dd>
<dt>s</dt>
<dd><div class='pgroup'><p>spanを定義する。おもにクラスを設定するときに利用する。</p>
</div>
<pre>[s.note{spanの中にはいる}]</pre>
</dd>
<dt>img</dt>
<dd><div class='pgroup'><p>画像を定義する。このコマンドにはブレースのセクションがない。</p>
</div>
<pre>[img(img/some_image.jpg,alternate text)]</pre>
</dd>
<dt>tcy</dt>
<dd><div class='pgroup'><p>class tcyのspanを定義する。縦書きにおける縦中横のスタイルをあてることを想定している。</p>
</div>
<pre>FM TOWNSが登場してからすでに[tcy{25}]年がたった。</pre>
</dd>
<dt>ruby</dt>
<dd><div class='pgroup'><p>ルビをマークアップする。</p>
</div>
<pre>[ruby(とんぼ){蜻蛉}]の[ruby(めがね){眼鏡}]はみずいろめがね</pre>
</dd>
</dl>
</section>
<section><h3 id='heading_index_11'>行コマンド</h3>
<div class='pgroup'><p>行コマンドは1行を占有し、次の形式をしています。</p>
</div>
<pre>&lt;コマンド&gt;:内容</pre>
<div class='pgroup'><p>定義済みの行コマンドには、次のものがあります。</p>
</div>
<dl><dt>p</dt>
<dd><div class='pgroup'><p>パラグラフをマークアップする。主に、クラスやIDを付加する目的で使う。</p>
</div>
<pre>p.caution: 用量に注意してご利用ください。</pre>
</dd>
<dt>image</dt>
<dd><div class='pgroup'><p>divでラップされたimgをマークアップする。</p>
</div>
<pre>image(./path-to-image/img.jpg, 代替テキスト): イメージのキャプション</pre>
</dd>
<dt>newpage</dt>
<dd><div class='pgroup'><p>新規ページを作成する。通常は、あらたなXHTMLファイルが生成される。</p>
</div>
<pre>newpage:</pre>
</dd>
</dl>
</section>
<section><h3 id='heading_index_12'>リスト</h3>
<section><h4 id='heading_index_13'>箇条書き</h4>
</section>
<section><h4 id='heading_index_14'>番号つきリスト</h4>
</section>
<section><h4 id='heading_index_15'>定義リスト</h4>
<section><h5 id='heading_index_16'>1行の定義</h5>
</section>
<section><h5 id='heading_index_17'>複数行の定義</h5>
</section>
</section>
</section>
<section><h3 id='heading_index_18'>見出し</h3>
<section><h4 id='heading_index_19'>単独の見出し</h4>
</section>
<section><h4 id='heading_index_20'>セクションを生成する見出し</h4>
</section>
</section>
<section><h3 id='heading_index_21'>Frontmatter</h3>
</section>
</section>
<section><h2 id='heading_index_22'>カスタマイズ</h2>
<section><h3 id='heading_index_23'>生成ルール追加</h3>
</section>
<section><h3 id='heading_index_24'>木構造の操作</h3>
</section>
</section>
<section><h2 id='heading_index_25'>XML生成</h2>
</section>
</section>
</body>
</html>
