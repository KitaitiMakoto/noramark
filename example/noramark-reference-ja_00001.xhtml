<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
<title>NoraMark Manual</title>
<link rel="stylesheet" type="text/css" href="nora-simple.css" />
<link rel="stylesheet" type="text/css" href="nora-simple-ja.css" />
</head>
<body>
<section><h1 id='heading_index_1'>NoraMark Manual</h1>
<div class='pgroup'><p><strong>(作成中・記述は未完成です。)</strong></p>
</div>
<div class='pgroup'><p>NoraMarkは、EPUBで利用するXHTMLを生成するためのマークアップとしてデザインされました。次のような特徴があります。</p>
</div>
<ul><li>プレーンテキストの原稿を邪魔しない最小限の記述</li>
<li>しかしマークアップ部分は、通常のテキストと「違って」見える。</li>
<li>ブロック・ライン・インラインごとの基本記法を原則として固定。憶える記法は少なくてすむはず。</li>
<li>生のHTML記法なしで、多くのタグを記述できる</li>
<li>マークアップに独自コマンドの追加ができる</li>
<li>文書構造に対する処理を追加できる</li>
<li>パース結果をXMLとして取得できる</li>
</ul>
<section><h2 id='heading_index_2'>必要なもの</h2>
<ul><li>ruby 2.0以上</li>
</ul>
</section>
<section><h2 id='heading_index_3'>インストール方法</h2>
<div class='pgroup'><p>Gemfileに次のように書きます</p>
</div>
<pre><code>gem 'nora_mark' </code>
</pre>
<div class='pgroup'><p>そして、</p>
</div>
<pre><code>$ bundle</code>
</pre>
<div class='pgroup'><p>または</p>
</div>
<pre><code>gem install nora_mark</code>
</pre>
</section>
<section><h2 id='heading_index_4'>使い方</h2>
<section><h3 id='heading_index_5'>コマンドラインから</h3>
<pre><code>$ nora2html &lt; source.nora &gt; output.xhtml</code>
</pre>
<div class='pgroup'><p>入力はutf-8のみ受け付けます。日本語のテキストであれば、kconvオプションでうまくうごくかもしれません。</p>
</div>
<pre><code>$ nora2html --kconv &lt; source.nora &gt; output.xhtml</code>
</pre>
<div class='pgroup'><p><s class='strong'>nora2htmlは、newpageコマンドを&lt;hr /&gt;タグに置き換え、すべてのページをひとつのxhtmlとして出力します</s></p>
</div>
</section>
<section><h3 id='heading_index_6'>コードから</h3>
<pre class='code-ruby' data-code-language='ruby'><code>require 'nora_mark'
document = NoraMark::Document.parse(string_or_io, lang: 'ja')
document.html.write_as_files</code>
</pre>
</section>
</section>
<section><h2 id='heading_index_7'>マークアップ</h2>
<section><h3 id='heading_index_8'>通常のテキスト</h3>
<div class='pgroup'><p>単なるテキストもHTMLに変換されます。</p>
</div>
<div class='pre'><p class='caption'>原稿</p>
<pre>吾輩は猫である。名前はまだ無い。
どこで生れたかとんと見当けんとうがつかぬ。何でも薄暗いじめじめした所でニャーニャー泣いていた事だけは記憶している。
＜中略＞
この書生の掌の裏うちでしばらくはよい心持に坐っておったが、しばらくすると非常な速力で運転し始めた。
ふと気が付いて見ると書生はいない。たくさんおった兄弟が一疋ぴきも見えぬ。</pre>
</div>
<div class='pre'><p class='caption'>変換結果</p>
<pre class='code-html' data-code-language='html'><code>&lt;div class='pgroup'&gt;
&lt;p&gt;吾輩は猫である。名前はまだ無い。&lt;/p&gt;
&lt;p&gt;どこで生れたかとんと見当けんとうがつかぬ。何でも薄暗いじめじめした所でニャーニャー泣いていた事だけは記憶している。&lt;/p&gt;
&lt;p&gt;＜中略＞&lt;/p&gt;
&lt;p&gt;この書生の掌の裏うちでしばらくはよい心持に坐っておったが、しばらくすると非常な速力で運転し始めた。&lt;/p&gt;
&lt;/div&gt;
&lt;div class='pgroup'&gt;
&lt;p&gt;ふと気が付いて見ると書生はいない。たくさんおった兄弟が一疋ぴきも見えぬ。&lt;/p&gt;
&lt;/div&gt;</code>
</pre>
</div>
<div class='pgroup'><p>改行ごとに&lt;p&gt;要素がつくられます。空行で区切られると、&lt;div class='pgroup'&gt;がつくられます。</p>
<p>言語が日本語(ja)以外の場合は、次のようになります。</p>
</div>
<div class='pre'><p class='caption'>原稿</p>
<pre>Lorem ipsum dolor sit amet, consectetur adipisicing elit,
sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
Ut enim ad minim veniam, quis nostrud exercitation </pre>
</div>
<div class='pre'><p class='caption'>変換結果</p>
<pre class='code-html' data-code-language='html'><code>&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, &lt;br /&gt;sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. &lt;/p&gt;
&lt;p&gt;Ut enim ad minim veniam, quis nostrud exercitation&lt;/p&gt;</code>
</pre>
</div>
</section>
<section><h3 id='heading_index_9'>明示的なブロック</h3>
<div class='pgroup'><p>NoraMarkでは、&lt;コマンド&gt; { ではじまり、} のみの行で終わる範囲を明示的なブロックとみなします。</p>
</div>
<div class='pre'><p class='caption'>原稿</p>
<pre>d.column {
この部分は、divで囲まれます。
}</pre>
</div>
<div class='pre'><p class='caption'>変換結果</p>
<pre class='code-html' data-code-language='html'><code>&lt;div class=&quot;column&quot;&gt;
&lt;div class=&quot;pgroup&quot;&gt;
&lt;p&gt;この部分は、divで囲まれます。&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;</code>
</pre>
</div>
<div class='pgroup'><p>定義済みの明示的ブロックのコマンドは、次のものがあります。</p>
</div>
<dl><dt>d</dt>
<dd>divを生成します</dd>
<dt>sec, section</dt>
<dd>sectionを生成します</dd>
<dt>art, article</dt>
<dd>articleを生成します</dd>
</dl>
<div class='pgroup'><p>このほかに、後述のpreformatブロックがあります。</p>
</div>
<div class='pgroup'><p>未定義のコマンドの場合は、対応する名前のタグを生成します。</p>
</div>
<div class='pre'><p class='caption'>原稿</p>
<pre>blockquote {
山路を登りながら、こう考えた。
智に働けば角が立つ。情に棹させば流される。意地を通せば窮屈だ。とかくに人の世は住みにくい
}</pre>
</div>
<div class='pre'><p class='caption'>変換結果</p>
<pre class='code-html' data-code-language='html'><code>&lt;blockquote&gt;
&lt;div class='pgroup'&gt;
&lt;p&gt;山路を登りながら、こう考えた。&lt;/p&gt;
&lt;p&gt;智に働けば角が立つ。情に棹させば流される。意地を通せば窮屈だ。とかくに人の世は住みにくい&lt;/p&gt;
&lt;/div&gt;
&lt;/blockquote&gt;</code>
</pre>
</div>
<section><h4 id='heading_index_10'>Preformat block</h4>
<div class='pgroup'><p>整形済みブロックは、次のように指定します。</p>
</div>
<div class='pre'><p class='caption'>形式1</p>
<pre><code>pre {
  format 1 : 整形済みの内容
}</code>
</pre>
</div>
<div class='pre'><p class='caption'>形式2</p>
<pre><code>pre {//
  format 2: 整形済みの内容
//}</code>
</pre>
</div>
<div class='pre'><p class='caption'>形式3</p>
<pre><code>```
  format 3: 整形済みの内容
```</code>
</pre>
</div>
<div class='pgroup'><p>形式1と2は、&lt;pre&gt;タグに変換されます。形式3は、&lt;pre&gt;&lt;code&gt;に変換されます。</p>
<p>整形済みの内容は、NoraMarkのテキストとしては解釈されません。</p>
</div>
<div class='pre'><p class='caption'>変換結果</p>
<pre class='code-html' data-code-language='html'><code>&lt;pre&gt;
format 1 : 整形済みの内容
&lt;/pre&gt;
&lt;pre&gt;
format 2 : 整形済みの内容
&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;
format 3 : 整形済みの内容
&lt;/code&gt;&lt;/pre&gt;</code>
</pre>
</div>
<div class='pgroup'><p>また、次のように書くことで整形済みコードを作ることもできます。</p>
</div>
<pre><code>code {
整形済みコード
}
code {//
整形済みコード
//}</code>
</pre>
<div class='pre'><p class='caption'>変換結果</p>
<pre class='code-html' data-code-language='html'><code>&lt;pre&gt;&lt;/code&gt;
整形済みコード
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;
整形済みコード
&lt;/code&gt;&lt;/pre&gt;</code>
</pre>
</div>
<section><h5 id='heading_index_11'>code languageの指定</h5>
<div class='pgroup'><p>code languageの指定をすることができます。</p>
</div>
<div class='pre'><p class='caption'>形式2</p>
<pre><code>code {//ruby
puts &quot;Hello, World.&quot;
//}</code>
</pre>
</div>
<div class='pre'><p class='caption'>形式3</p>
<pre><code>```ruby
puts &quot;Hello, World.&quot;
```</code>
</pre>
</div>
<div class='pre'><p class='caption'>変換結果</p>
<pre class='code-html' data-code-language='html'><code>&lt;pre class='code-ruby' data-code-language='ruby'&gt;&lt;code&gt;
puts &quot;Hello, World.&quot;
&lt;/code&gt;&lt;/pre&gt;</code>
</pre>
</div>
</section>
<section><h5 id='heading_index_12'>キャプションの指定</h5>
<div class='pre'><p class='caption'>原稿</p>
<pre>code(ソースコードはこちら) {
puts 'Hello, World'
}</pre>
</div>
<div class='pgroup'><p>または、こんな書き方もできます。</p>
</div>
<div class='pre'><p class='caption'>原稿</p>
<pre>```(ソースコードはこちら) {
puts 'Hello, World'
```</pre>
</div>
<div class='pgroup'><p>こんな風になります。</p>
</div>
<div class='pre'><p class='caption'>変換結果</p>
<pre class='code-html' data-code-language='html'><code>&lt;div class='pre'&gt;
&lt;p class='caption'&gt;原稿はこちら&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;
puts 'Hello, World'
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;</code>
</pre>
</div>
</section>
</section>
</section>
<section><h3 id='heading_index_13'>インラインコマンド</h3>
<div class='pgroup'><p>インラインコマンドは、次の形式をしています。</p>
</div>
<pre>[&lt;コマンド&gt;{内容}]</pre>
<div class='pgroup'><p>定義済みのインラインコマンドには、次のものがあります。</p>
</div>
<dl><dt>l</dt>
<dd><div class='pgroup'><p>リンクを定義する。</p>
</div>
<pre>[l(http://github.com/skoji/noramark){NoraMarkのレポジトリ}]</pre>
</dd>
<dt>s</dt>
<dd><div class='pgroup'><p>spanを定義する。おもにクラスを設定するときに利用する。</p>
</div>
<pre>[s.note{spanの中にはいる}]</pre>
</dd>
<dt>img</dt>
<dd><div class='pgroup'><p>画像を定義する。このコマンドにはブレースのセクションがない。</p>
</div>
<pre>[img(img/some_image.jpg,alternate text)]</pre>
</dd>
<dt>tcy</dt>
<dd><div class='pgroup'><p>class tcyのspanを定義する。縦書きにおける縦中横のスタイルをあてることを想定している。</p>
</div>
<pre>FM TOWNSが登場してからすでに[tcy{25}]年がたった。</pre>
</dd>
<dt>ruby</dt>
<dd><div class='pgroup'><p>ルビをマークアップする。</p>
</div>
<pre>[ruby(とんぼ){蜻蛉}]の[ruby(めがね){眼鏡}]はみずいろめがね</pre>
</dd>
</dl>
</section>
<section><h3 id='heading_index_14'>行コマンド</h3>
<div class='pgroup'><p>行コマンドは1行を占有し、次の形式をしています。</p>
</div>
<pre>&lt;コマンド&gt;:内容</pre>
<div class='pgroup'><p>定義済みの行コマンドには、次のものがあります。</p>
</div>
<dl><dt>p</dt>
<dd><div class='pgroup'><p>パラグラフをマークアップする。主に、クラスやIDを付加する目的で使う。</p>
</div>
<pre>p.caution: 用量に注意してご利用ください。</pre>
</dd>
<dt>image</dt>
<dd><div class='pgroup'><p>divでラップされたimgをマークアップする。</p>
</div>
<pre>image(./path-to-image/img.jpg, 代替テキスト): イメージのキャプション</pre>
</dd>
<dt>newpage</dt>
<dd><div class='pgroup'><p>新規ページを作成する。通常は、あらたなXHTMLファイルが生成される。</p>
</div>
<pre>newpage:</pre>
</dd>
</dl>
</section>
<section><h3 id='heading_index_15'>リスト</h3>
<section><h4 id='heading_index_16'>箇条書き</h4>
<div class='pre'><p class='caption'>原稿</p>
<pre>* *ではじまる行は、箇条書きになる。
* 空行があくまで、箇条書きがつづく。
* 空行があくと、あらたな箇条書きになる。</pre>
</div>
<div class='pre'><p class='caption'>変換結果</p>
<pre class='code-html' data-code-language='html'><code>&lt;ul&gt;&lt;li&gt;*ではじまる行は、箇条書きになる。&lt;/li&gt;
&lt;li&gt;空行があくまで、箇条書きがつづく。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;&lt;li&gt;空行があくと、あらたな箇条書きになる。&lt;/li&gt;
&lt;/ul&gt;</code>
</pre>
</div>
</section>
<section><h4 id='heading_index_17'>番号つきリスト</h4>
<div class='pre'><p class='caption'>原稿</p>
<pre>1. 数字.ではじまる行は、番号つきリストになる。
2. 空行があくまで、リストがつづく。
3. 空行があくと、あらたなリストになる。
10. 先頭の数字にかかわらず、1から順に番号がふられる。</pre>
</div>
<div class='pre'><p class='caption'>変換結果</p>
<pre class='code-html' data-code-language='html'><code>&lt;ol&gt;&lt;li&gt;数字.ではじまる行は、番号つきリストになる。  &lt;/li&gt;
&lt;li&gt;空行があくまで、リストがつづく。&lt;/li&gt;
&lt;/ol&gt;
&lt;ol&gt;&lt;li&gt;空行があくと、あらたなリストになる。&lt;/li&gt;
&lt;li&gt;先頭の数字にかかわらず、1から順に番号がふられる。&lt;/li&gt;
&lt;/ol&gt;</code>
</pre>
</div>
</section>
<section><h4 id='heading_index_18'>定義リスト</h4>
<div class='pgroup'><p>定義リストには、二種類の書き方があります。</p>
</div>
<section><h5 id='heading_index_19'>1行の定義</h5>
<div class='pre'><p class='caption'>原稿</p>
<pre>;: それがし : 名前がわからない，または名前を隠して人や物事をさす語。
;: それがしかれがし : 不定称。二人以上の人に対し，名を知らなかったり，名を省略していうときに用いる語。</pre>
</div>
<div class='pre'><p class='caption'>変換結果</p>
<pre class='code-html' data-code-language='html'><code>&lt;dl&gt;
&lt;dt&gt;それがし&lt;/dt&gt;
&lt;dd&gt;名前がわからない，または名前を隠して人や物事をさす語。&lt;/dd&gt;
&lt;dt&gt;それがしかれがし&lt;/dt&gt;
&lt;dd&gt;不定称。二人以上の人に対し，名を知らなかったり，名を省略していうときに用いる語。&lt;/dd&gt;
&lt;/dl&gt;</code>
</pre>
</div>
</section>
<section><h5 id='heading_index_20'>複数行の定義</h5>
<div class='pgroup'><p>説明が長い場合は、複数行の形式で書けます。この場合、説明部分は段落になります。</p>
</div>
<div class='pre'><p class='caption'>原稿</p>
<pre>;: それがし {
 名前がわからない，または名前を隠して人や物事をさす語。
}
;: それがしかれがし {
 不定称。二人以上の人に対し，名を知らなかったり，名を省略していうときに用いる語。
}</pre>
</div>
<div class='pre'><p class='caption'>変換結果</p>
<pre class='code-html' data-code-language='html'><code>&lt;dl&gt;
&lt;dt&gt;それがし&lt;/dt&gt;
&lt;dd&gt;&lt;div class=&quot;pgroup&quot;&gt;&lt;p&gt;名前がわからない，または名前を隠して人や物事をさす語。&lt;/p&gt;&lt;/div&gt;&lt;/dd&gt;
&lt;dt&gt;それがしかれがし&lt;/dt&gt;
&lt;dd&gt;&lt;div class=&quot;pgroup&quot;&gt;&lt;p&gt;不定称。二人以上の人に対し，名を知らなかったり，名を省略していうときに用いる語。&lt;/p&gt;&lt;/div&gt;&lt;/dd&gt;
&lt;/dl&gt;</code>
</pre>
</div>
</section>
</section>
</section>
<section><h3 id='heading_index_21'>見出し</h3>
<section><h4 id='heading_index_22'>単独の見出し</h4>
</section>
<section><h4 id='heading_index_23'>セクションを生成する見出し</h4>
</section>
</section>
<section><h3 id='heading_index_24'>Frontmatter</h3>
</section>
</section>
<section><h2 id='heading_index_25'>カスタマイズ</h2>
<section><h3 id='heading_index_26'>生成ルール追加</h3>
</section>
<section><h3 id='heading_index_27'>木構造の操作</h3>
</section>
</section>
<section><h2 id='heading_index_28'>XML生成</h2>
</section>
</section>
</body>
</html>
